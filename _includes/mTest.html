<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- Enable responsive viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 <script>
    (function( $ ) {
	var requests = {};
	var zipValid = {
		us: /[0-9]{5}(-[0-9]{4})?/
	};

	$.ziptastic = function(country, zip, callback){
		// If only zip and callback are given default to US
		if (arguments.length == 2 && typeof arguments[1] == 'function') {
			callback = arguments[1];
			zip = arguments[0];
			country = 'US';
		}

		country = country.toUpperCase();
		// Only make unique requests
		if(!requests[country]) {
			requests[country] = {};
		}
		if(!requests[country][zip]) {
			requests[country][zip] = $.getJSON('https://zip.getziptastic.com/v2/' + country + '/' + zip);
		}

		// Bind to the finished request
		requests[country][zip].done(function(data) {
			if (typeof callback == 'function') {
				callback(data.country, data.state, data.state_short, data.city, zip);
			}
		});

		// Allow for binding to the deferred object
		return requests[country][zip];
	};

	$.fn.ziptastic = function( options ) {
		return this.each(function() {
			var ele = $(this);

			ele.on('keyup', function() {
				var zip = ele.val();

				// TODO Non-US zip codes?
				if(zipValid.us.test(zip)) {
					$.ziptastic(zip, function(country, state, state_short, city) {
						// Trigger the updated information
						ele.trigger('zipChange', [country, state, state_short, city, zip]);
					});
				}
			});
		});
	};
})( jQuery );

    </script>

    <script type="text/javascript">
    (function($) {
                $(function() {
                    var duration = 500;
                    var elements = {
                        country: $('#country'),
                        state: $('#state'),
                        state_short: $('#state-short'),
                        city: $('#city'),
                        zip: $('#zip')
                    }
                    // Initially hide the city/state/zip
                    elements.country.parent().hide();
                    elements.state.parent().hide();
                    elements.state_short.parent().hide();
                    elements.city.parent().hide();
                    // Initialize the ziptastic and bind to the change of zip code
                    elements.zip.ziptastic()
                        .on('zipChange', function(evt, country, state, state_short, city, zip) {
                            // Country
                            //      elements.country.val(country).parent().show(duration);
                            // State
                            elements.state_short.val(state_short).parent().show(duration);
                            elements.state.val(state).parent().show(duration);
                            // City
                            elements.city.val(city).parent().show(duration);
                        });
                });
            }(jQuery));

    </script>

</head>
<body>

<div id ="mSearchContent" class="container">
    <h2>Find A </h2><h2>Barbershop</h2>
    <form>
        <select id="state-choice">
                <option selected value="base">Select a State</option>
                <option value = "DC">District of Columbia</option>
                <option value = "AL">Alabama</option>
                <option value = "AK">Alaska</option>
                <option value = "AZ">Arizona</option>
                <option value = "AR">Arkansas</option>
                <option value = "CA">California</option>
                <option value = "CO">Colorado</option>
                <option value = "CT">Connecticut</option>
                <option value = "DE">Delaware</option>
                <option value = "FL">Florida</option>
                <option value = "GA">Georgia</option>
                <option value = "HA">Hawaii</option>
                <option value = "ID">Idaho</option>
                <option value = "IL">Illinois</option>
                <option value = "IN">Indiana</option>
                <option value = "IA">Iowa</option>
                <option value = "KS">Kansas</option>
                <option value = "KY">Kentucky</option>
                <option value = "LA">Louisiana</option>
                <option value = "ME">Maine</option>
                <option value = "MD">Maryland</option>
                <option value = "MA">Massachusetts</option>
                <option value = "MI">Michigan</option>
                <option value = "MN">Minnesota</option>
                <option value = "MS">Mississippi</option>
                <option value = "MO">Missouri</option>
                <option value = "MT">Montana</option>
                <option value = "NE">Nebraska</option>
                <option value = "NV">Nevada</option>
                <option value = "NH">New Hampshire</option>
                <option value = "NJ">New Jersey</option>
                <option value = "NM">New Mexico</option>
                <option value = "NY">New York</option>
                <option value = "NC">North Carolina</option>
                <option value = "ND">North Dakota</option>
                <option value = "OH">Ohio</option>
                <option value = "OK">Oklahoma</option>
                <option value = "OR">Oregon</option>
                <option value = "PA">Pennsylvania</option>
                <option value = "RI">Rhode Island</option>
                <option value = "SC">South Carolina</option>
                <option value = "SD">South Dakota</option>
                <option value = "TN">Tennessee</option>
                <option value = "TX">Texas</option>
                <option value = "UT">Utah</option>
                <option value = "VT">Vermont</option>
                <option value = "VA">Virgina</option>
                <option value = "WA">Washington</option>
                <option value = "WV">West Virgina</option>
                <option value = "WI">Wisconsin</option>
                <option value = "WY">Wyoming</option>
            </select>
            <br>

            <select id="city-choice">
                <option>Choose State Above</option>
            </select>
            <br>

            <button type="button" onclick="alert(CitySearcher)">Search</button>
        </form>

        <h1>-OR-</h1>

        <h2>Please Enter A Zip Code</h2><h2>You Want To Search</h2>

        <form id="zipform">
            <label for="zip">
    			Zip:
    			<input type="text" id="zip" />
    		</label>

            <label for="city">
                City:
                <input type="text" id="city" />
            </label>

            <label for="state">
                State:
                <input type="text" id="state" />
            </label>

            <label for="state-short">
                State Short:
                <input type="text" id="state-short" />
            </label>

            <label for="country">
                Country:
                <input type="text" id="country" />
            </label>
        </form>

</div>

</body>
</html>
